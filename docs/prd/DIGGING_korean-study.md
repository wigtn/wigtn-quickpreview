# PRD Analysis Report — Korean Study App

## 분석 대상
- **문서**: `docs/prd/PRD_korean-study.md`
- **버전**: 1.0
- **분석일**: 2026-02-13

---

## 요약

| 카테고리 | 발견 | Critical | Major | Minor |
|----------|------|----------|-------|-------|
| 완전성 | 6 | 1 | 3 | 2 |
| 실현가능성 | 4 | 0 | 2 | 2 |
| 보안 | 3 | 1 | 1 | 1 |
| 일관성 | 2 | 0 | 1 | 1 |
| **총계** | **15** | **2** | **7** | **6** |

---

## 긍정적 발견 (PRD에서 몰랐던 사실)

코드 분석 결과, PRD에서 "리팩토링 필요"로 적은 부분이 **이미 구현되어 있는 것**이 다수 발견됨:

| 항목 | PRD 기술 | 실제 코드 상태 |
|------|---------|---------------|
| 번역 방향 파라미터 | "방향 반전 필요" | `source_language`, `target_language` 이미 지원 (`translation.py:155`) |
| 다국어 번역 스키마 | "새로 만들어야 함" | `TranslateRequest`에 `sourceLanguage`, `targetLanguage` 필드 이미 존재 (`schemas.py:166`) |
| 표시 모드 토글 | "새로 구현" | `ScriptPanel`에 `"both" | "original" | "translated"` 3가지 모드 이미 구현 (`script-panel.tsx:35`) |
| 배치 번역 | "재활용" | 10개씩 배치, 3개 동시 처리, 문맥 2개 보존 완벽 구현 |

**결론**: 기존 번역 인프라를 거의 그대로 쓸 수 있음. `source_language="ko"`, `target_language="en"` 만 바꿔 호출하면 동작.

---

## 상세 분석

### 🔴 Critical (즉시 수정 필요)

#### C-1. 기사 저작권 문제에 대한 구체적 대응 부재

- **위치**: Section 11 - Risks & Mitigations
- **문제**: "교육 목적 명시, URL 링크 원본 연결, 전문 미저장"이라고만 적혀 있으나, 한국 뉴스 매체들은 기사 전문 복사에 민감함. 특히 상업적 서비스에서 기사 본문을 DB에 저장하거나 번역 결과를 캐싱하면 저작권 이슈 발생 가능
- **영향**: 법적 리스크, 서비스 중단 가능
- **개선안**:
  ```
  Phase 1 대응:
  1. 정적 기사 데이터 → "학습용 샘플 기사" 직접 작성 (공공 데이터 또는 자체 제작)
  2. 공공누리 유형1(출처표시) 기사만 사용 (정부/공공기관 보도자료)
  3. URL 입력 시 → 기사 본문을 서버에 저장하지 않고, 세션 내에서만 사용 후 폐기

  Phase 2 이후:
  4. 뉴스 매체와 콘텐츠 제휴 협의
  5. 또는 Creative Commons 라이선스 콘텐츠만 큐레이션
  ```

#### C-2. Cloud Run 2서비스 구조에서 NestJS 의존 코드 잔존

- **위치**: Section 3.1 - 시스템 아키텍처
- **문제**: PRD는 "NestJS 제외, 2서비스(Web+AI)" 구조인데, 기존 Web의 SSE 스트리밍 코드(`analyze/stream/route.ts`)가 NestJS API 엔드포인트(`/api/v1/youtube/metadata`, `/api/v1/transcript`)를 직접 호출하고 있음. Korean Study 기능 구현 시 이 의존성을 어떻게 처리할지 명시 필요
- **영향**: NestJS 없이 배포하면 기존 영상 분석 기능 깨짐
- **개선안**:
  ```
  선택지 1 (권장): Korean Study는 NestJS 의존 없이 순수하게 Web→AI 직접 호출로 구현.
                   기존 Video Analyzer는 당분간 NestJS 의존 유지 (로컬 개발용).

  선택지 2: 기존 Video Analyzer의 NestJS 호출도 AI 서비스 직접 호출로 마이그레이션.
            (범위가 커지므로 별도 태스크로 분리)
  ```

---

### 🟡 Major (구현 전 수정 권장)

#### M-1. 번역 프롬프트의 다국어 지원 불완전

- **위치**: Section 7.2 - AI Prompts
- **문제**: 현재 `translation.py`의 프롬프트가 `ko→en`과 `en→ko` 두 경우만 분기 처리함. `ko→ja`, `ko→zh`, `ko→vi` 등은 프롬프트가 정의되지 않아 en→ko 기본 프롬프트로 fallback됨
- **영향**: 영어 외 언어 번역 품질 저하
- **개선안**:
  ```python
  # translation.py 프롬프트 개선
  # 현재: ko→en, en→ko 두 가지만 분기
  # 개선: target_language에 따른 다국어 프롬프트 템플릿

  TRANSLATION_PROMPTS = {
      "en": "You are a professional Korean-to-English translator...",
      "ja": "あなたはプロの韓日翻訳者です...",
      "zh": "你是一位专业的韩中翻译...",
      "es": "Eres un traductor profesional de coreano a español...",
      "vi": "Bạn là một dịch giả chuyên nghiệp Hàn-Việt...",
      "default": "You are a professional translator from Korean to {target_language}..."
  }
  ```

#### M-2. 정적 기사 데이터의 업데이트 전략 부재

- **위치**: Section 7.3 - 기사 데이터 소스
- **문제**: Phase 1에서 "정적 JSON 10-20개"로 시작하는데, 이 기사가 금방 오래됨. 뉴스 기사는 시의성이 생명인데 정적 데이터는 "2026년 2월 기사"가 6개월 후에도 그대로임
- **영향**: 사용자 재방문율 저하, "업데이트 안 되는 앱" 인상
- **개선안**:
  ```
  Phase 1 개선:
  1. "뉴스 기사" 대신 "학습 텍스트"로 포지셔닝 변경
     - 시사 뉴스 + 문화 칼럼 + 에세이 + K-drama 대사 등 혼합
     - 시의성 낮은 "에버그린 콘텐츠" 위주 큐레이션
  2. 난이도별 카테고리를 더 세분화
     - 초급: 간단한 일상 기사, 날씨, 음식 소개
     - 중급: 사회 이슈, 문화 칼럼
     - 고급: 경제 분석, 사설

  Phase 1.5 (조기 도입 고려):
  3. RSS 피드 자동 수집을 Phase 2가 아닌 Phase 1.5로 앞당기기
     - 공공 RSS (정부 보도자료, KBS 뉴스) 우선
  ```

#### M-3. 사용자 온보딩 플로우 미정의

- **위치**: 전체 (누락)
- **문제**: 외국인 사용자가 처음 접속했을 때의 경험이 정의되지 않음. 모국어 선택, 난이도 설정, 사용법 안내 등
- **영향**: 첫 사용자 이탈률 증가
- **개선안**:
  ```
  추가 요구사항:
  FR-007: 첫 방문 시 온보딩 모달
    1. 모국어 선택 (필수)
    2. 한국어 수준 선택 (초급/중급/고급)
    3. 간단한 사용법 안내 (3스텝)
    → localStorage에 저장, 이후 Skip
  ```

#### M-4. AI 서비스 응답 언어 일관성

- **위치**: Section 7.1 - API Specification
- **문제**: `parse-sentence`와 `word-lookup` 응답의 설명(explanation)이 사용자 모국어로 와야 하는데, OpenAI 프롬프트가 항상 영어로 응답할 가능성. 특히 일본어/베트남어 사용자에게 영어 설명이 나오면 학습 효과 감소
- **영향**: 비영어권 사용자 경험 저하
- **개선안**:
  ```
  프롬프트에 명시:
  "IMPORTANT: All explanations, meanings, and grammar points MUST be
   written in {targetLanguage}. The user does not understand English."

  + 응답 검증: explanation 필드가 target_language로 작성되었는지 후처리 검증
  ```

---

### 🟢 Minor (개선 제안)

#### m-1. 용어 불일치

- **위치**: 전체
- **문제**: "학습 모드", "Study Mode", "스터디앱", "Korean Study" 등 한/영 혼용
- **개선안**: UI 표기는 영어 (국제 사용자 대상), 내부 코드/PRD는 영어로 통일. 기능명: `Study Mode`

#### m-2. 모바일 UX 고려 미흡

- **위치**: Section 8 - UI Wireframe
- **문제**: 데스크톱 와이어프레임만 있고, 모바일 레이아웃이 없음. 한국어 학습자는 모바일 사용 비율이 높을 것으로 예상
- **개선안**: Phase 1에서 모바일 퍼스트 반응형 설계 적용. 특히 라인 바이 라인 뷰의 모바일 스와이프 UX 고려

#### m-3. 에러 메시지 다국어

- **위치**: Section 7.1 - Error Responses
- **문제**: 에러 메시지가 영어로만 정의됨. 사용자 모국어로 에러를 보여주는 게 더 나음
- **개선안**: Phase 2에서 에러 메시지 i18n 적용

#### m-4. 접근성(a11y) 요구사항 부족

- **위치**: Section 6 - Non-Functional Requirements
- **문제**: 기존 WIGVU v2 PRD에는 NFR-020~023 접근성 요구사항이 있었는데, Korean Study PRD에는 누락됨
- **개선안**: 동일한 접근성 요구사항 추가 (키보드 내비게이션, Escape 닫기, 폰트 크기 등)

---

## 누락된 기능 (추가 검토)

### 추가 권장 기능

| ID | 기능 | 설명 | 권장 Phase | 우선순위 |
|----|------|------|-----------|---------|
| NEW-1 | **읽기 속도/난이도 표시** | 기사별 글자 수, 예상 읽기 시간, 고급 어휘 비율 표시 | Phase 1 | P1 |
| NEW-2 | **문장 하이라이트 (호버)** | 학습 모드에서 문장 호버 시 해당 줄 하이라이트 + 번역 강조 | Phase 1 | P1 |
| NEW-3 | **한자어 표시** | 한국어 한자어에 한자 병기 옵션 (일본어/중국어 사용자에게 유용) | Phase 2 | P2 |
| NEW-4 | **발음 가이드 (로마자)** | 각 문장 아래에 로마자 발음 토글 (초급 학습자용) | Phase 2 | P1 |
| NEW-5 | **공유 기능** | 특정 기사+학습결과를 링크로 공유 (SNS 바이럴) | Phase 2 | P2 |
| NEW-6 | **기사 북마크** | localStorage 기반 즐겨찾기 (Phase 3 전 간이 구현) | Phase 1 | P2 |
| NEW-7 | **다크모드 기본값 자동 감지** | `prefers-color-scheme` 미디어 쿼리로 시스템 설정 따라가기 | Phase 1 | P2 |
| NEW-8 | **텍스트 크기 조절** | 학습 뷰에서 폰트 크기 조절 슬라이더 (가독성) | Phase 1 | P1 |

### 특별 추천: 한자어 표시 (NEW-3)

일본어/중국어 사용자에게 **킬러 피처**가 될 수 있음:

```
예시:
"한국은행(韓國銀行)은 기준금리(基準金利)를 동결(凍結)했다."

일본어 사용자 → 한자를 보면 즉시 의미 파악 가능
중국어 사용자 → 마찬가지로 한자 이해도 높음
```

OpenAI에 한자 병기를 요청하면 자동 추출 가능. 비용 추가 미미.

---

## 리스크 매트릭스 (업데이트)

| 리스크 | 발생 확률 | 영향도 | PRD 기존 대응 | 추가 권장 대응 |
|--------|----------|--------|-------------|---------------|
| 기사 저작권 | 높음 | 높음 | 교육 목적 명시 | 공공누리/자체 제작 콘텐츠 우선, 전문 미저장 |
| NestJS 의존성 | 높음 | 중간 | 미언급 | Study는 AI 직접 호출, Video는 별도 마이그레이션 |
| 다국어 번역 품질 편차 | 중간 | 중간 | 주요 언어 우선 | 언어별 전용 프롬프트 + 품질 검증 루프 |
| OpenAI 응답 언어 불일치 | 중간 | 중간 | 미언급 | 프롬프트 강제 + 후처리 검증 |
| 정적 콘텐츠 노후화 | 높음 | 중간 | Phase 2 RSS | 에버그린 콘텐츠 + RSS 조기 도입 |
| 첫 사용자 이탈 | 중간 | 높음 | 미언급 | 온보딩 플로우 추가 |
| Cold start (AI min=1) | 낮음 | 낮음 | min=1 설정 | 현재 대응 충분 |

---

## 권장 조치

### 즉시 조치 (Critical)
1. **기사 저작권 전략 구체화** (C-1) — 공공누리/자체 제작 콘텐츠로 Phase 1 시작
2. **NestJS 의존성 처리 방침 명확화** (C-2) — Study는 AI 직접 호출로 독립 구현

### 구현 전 조치 (Major)
3. **다국어 프롬프트 템플릿 준비** (M-1) — 최소 영/일/중 3개 언어
4. **콘텐츠 전략 재검토** (M-2) — "뉴스" → "학습 텍스트" 포지셔닝
5. **온보딩 플로우 추가** (M-3) — 모국어 + 수준 선택
6. **AI 응답 언어 강제** (M-4) — 프롬프트 개선

### 가능하면 조치 (Minor + 추가 기능)
7. 용어 통일 (m-1)
8. 모바일 와이어프레임 추가 (m-2)
9. 읽기 시간/난이도 표시 (NEW-1)
10. 텍스트 크기 조절 (NEW-8)
11. 한자어 표시 옵션 (NEW-3) — 일본어/중국어 사용자 킬러 피처

---

## 다음 단계

Critical 이슈 2개를 PRD에 반영한 후 → `/implement korean-study` 로 구현 시작 가능.
